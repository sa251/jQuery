<!DOCTYPE html>
<html lang="ja">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="style.css" rel="stylesheet" />

  <title>おみくじアプリ</title>
</head>

<body>
  <div class="app-header-contents">
    <h1>- おみくじアプリ -</h1>
    <h2>今日のあなたの運勢は・・・</h2>
    <button class="start-button js-fortune-start" type="button">
      運勢を占う！
    </button>
  </div>

  <div class="result">
    <div class="row">
      <div class="radius money">
        <p class="title">金運</p>
        <p class="stars"></p>
        <p class="detail"></p>
      </div>
    </div>
    <div class="row">
      <div class="radius work">
        <p class="title">仕事運</p>
        <p class="stars"></p>
        <p class="detail"></p>
      </div>
      <div class="radius health">
        <p class="title">健康運</p>
        <p class="stars"></p>
        <p class="detail"></p>
      </div>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    // // ここに処理を記載します

    $(document).on('click', '.js-fortune-restart', function () {

      $(".result").fadeOut(2000);
      toggleStartClass(this, '運勢を占う！');

    });

    function toggleStartClass(element, text) {
      $(element).toggleClass('js-fortune-start').toggleClass('js-fortune-restart').text(text);

    };
    const fortuneResults = {
      money: [
        { stars: '★★★', detail: '最高の運勢です！いつの間にかお金がたまっているかも・・・？' },
        { stars: '★★', detail: 'まずまずの金運です！使いすぎには注意しましょう！' },
        { stars: '★', detail: '悪い傾向が見られます！財布の紐は絞めておくと吉です！' }
      ],
      work: [
        { stars: '★★★', detail: '最高の仕事運です！いつも以上にチャンスが巡ってくるかも・・・？' },
        { stars: '★★', detail: 'まずまずの仕事運です！普段通り仕事が進むでしょう！' },
        { stars: '★', detail: '悪い傾向が見られます！自信過剰にならないように注意しましょう' }
      ],
      health: [
        { stars: '★★★', detail: '最高の健康運です！ランニングの距離を伸ばしても良いですね！' },
        { stars: '★★', detail: 'まずまずの健康運です！無理せず体を動かしましょう！' },
        { stars: '★', detail: '悪い傾向が見られます！ケガにご注意を・・・' }
      ]
    }


    $(document).on('click', '.js-fortune-start', function () {
      $(".result").fadeIn(2000);
      $(".result").css("display", "block");
      toggleStartClass(this, 'もう一度占う！');


      for (let title in fortuneResults) {
        let result_num = Math.floor(Math.random() * 3);
        let stars = '';
        let detail = '';

        stars = fortuneResults[title][result_num]["stars"]
        detail = fortuneResults[title][result_num]["detail"]

        // console.log(title);
        console.log(stars);
        console.log(detail);

        const element_stars = $("." + title).find(".stars");
        const element_detail = $("." + title).find(".detail");
        $(element_stars).text(stars);
        $(element_detail).text(detail);

      };

    });
  </script>
</body>

</html>